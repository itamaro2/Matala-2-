/* בסיס */
* { margin: 0; box-sizing: border-box; }
html, body { height: 100%; }

/* col- אחראי רק לרוחב, בלי גבול */
[class*="col-"] { float: none; padding: 0; }
.col-1 {width: 8.33%;}
.col-2 {width: 16.66%;}
.col-3 {width: 25%;}
.col-4 {width: 33.33%;}
.col-5 {width: 41.66%;}
.col-6 {width: 50%;}
.col-7 {width: 58.33%;}
.col-8 {width: 66.66%;}
.col-9 {width: 75%;}
.col-10 {width: 83.33%;}
.col-11 {width: 91.66%;}
.col-12 {width: 100%;}

/* מסגרות */
.frame { border: 3px solid #e70909; }
.box {
  border: 3px solid #e70909;
  background: transparent;
  padding: 8px;
  height: 100%; /* התיבה תמיד תמלא את הגובה שהוקצה לה */
}

/* פריסת העמוד */
.layout {
  display: flex;
  flex-direction: row;
  align-items: stretch;
  gap: 12px;
  height: 100vh; /* גובה מסך מלא */
  padding: 8px;
}

/* מסגרת חיצונית לאזור הימני */
#main.frame {
  padding: 12px;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* פס שמאלי נמתח לגובה מלא */
#sidebar { align-self: stretch; }

/* שורות פנימיות - הגדרת גבהים באחוזים במקום פיקסלים */
.row {
  display: flex;
  align-items: stretch;
  gap: 12px;
  /* אין padding-block קבוע כדי לא לפגוע בחישוב האחוזים */
}

/* חישוב אחוזים (סה"כ כ-100% פחות המרווחים) */
.row.top { 
    height: 18%; /* שורה עליונה */
} 

.row.mid { 
    height: 50%; /* אזור אמצעי גדול */
}

.row.bottom { 
    height: 28%; /* שורה תחתונה */
}


/* רוחב עמודות פנימיות */
.row.top > .col-3 { width: calc(25% - 9px); }

/* אזור אמצעי */
.row.mid > .col-6 { width: calc(50% - 6px); }

.row.mid .left {
  display: flex;
  flex-direction: column;
  gap: 12px;
  height: 100%;
}
.row.mid .left .box { 
    height: 50%; /* כל קופסה בצד שמאל לוקחת חצי מהגובה */
    flex: 1; 
}

.row.mid .right { display: flex; height: 100%; }
.row.mid .right .tall { width: 100%; height: 100%; }

/* שורה תחתונה */
.row.bottom > .col-9 { width: calc(75% - 6px); }
.row.bottom > .col-3 { width: calc(25% - 6px); }


/* רספונסיביות: מובייל (עד 750px) */
@media screen and (max-width: 750px) {
  
  /* הופך את הפריסה הראשית לאנכית (אחד מתחת לשני) */
  .layout { 
      flex-direction: column; 
      height: auto; 
      padding: 5px;
  }

  /* תיקון קריטי: מכריח את ה-Sidebar וה-Main לתפוס רוחב מלא */
  /* זה יסדר את הבעיה שה-Sidebar נראה כמו קוביה קטנה בצד */
  #sidebar, #main {
      width: 100% !important;
      max-width: 100%;
      flex: none; /* מבטל הגדרות גמישות קודמות */
  }

  /* הגדרת ה-Sidebar כפס עליון */
  #sidebar {
      height: 10vh; /* גובה הפס העליון - 10% מהמסך */
      min-height: 60px; /* שלא יהיה נמוך מדי */
      margin-bottom: 10px;
  }

  /* איפוס הגדרות למסגרת הראשית */
  #main.frame {
      gap: 10px;
      height: auto; /* הגובה יקבע לפי התוכן */
  }

  /* טיפול בשורות הפנימיות - ביטול הגדרות ה-Flex האופקיות */
  .row { 
      flex-direction: column; 
      gap: 10px; 
      height: auto; 
      padding: 0;
  }

  /* כל העמודות הפנימיות הופכות למלבנים ברוחב מלא */
  [class*="col-"] { 
      width: 100% !important; 
  }

  /* טיפול באזור האמצעי - שלא יהיה זה לצד זה */
  .row.mid .left, 
  .row.mid .right {
      width: 100%;
      display: flex;
      flex-direction: column;
      gap: 10px;
  }

  /* הגדרת גבהים למלבנים (פסים לרוחב) */
  /* משתמשים ב-VH כדי שזה יהיה יחסי למסך, אבל בגובה הגיוני למובייל */
  
  .row.top .box { height: 12vh; }       /* 4 המלבנים העליונים */
  
  .row.mid .left .box { height: 12vh; } /* 2 המלבנים באמצע-שמאל */
  
  .row.mid .right .tall { height: 20vh; } /* המלבן הגדול באמצע */
  
  .row.bottom .box { height: 12vh; }    /* המלבנים התחתונים */
}